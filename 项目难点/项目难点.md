项目业务学习

记录滚动条位置，返回后能回到原点

进行批量审批

diff算法的问题

动态设置年级时间

下载文件的进度条

基本布局方案

微信小程序的分包

vue的缺点

微信小程序/uni-app生命周期问题

组件传参与生命周期的时间赛跑





分页用的就算antd里面的分页组件，其实一开始在vue的项目里面记录分页数据的时候是用vuex写的，但是后面发现这样还要考虑刷新的时候vuex会清空的问题，实现起来还是有些麻烦，然后我观察了一下b站,leetcode这些平台怎么做分页获取的。发现其实可用用路由的state或者params参数，之所以用state是因为state看不到更加安全。不过后来发现这也有不好的地方，因为是通过路由来记录的嘛，每次更新都要跳转路由，历史路由就会很多，不知道会不会有什么影响，

文件上传的话我就是用的formdata格式，另外呢，还做了一些文件大小格式的限制，这个就是根据后端要求来做的，后面通过学习，我又学到了什么什么方法，并且还有大文件上传切割的使用。

```js
  // 上传文件
    handlefileload(e) {
      let files = e.target.files;
      let param = new FormData();
      // formData重复的往一个值添加数据并不会被覆盖掉，可以全部接收到，可以通过formData.getAll('files')来查看所有插入的数据
      for (let i = 0; i < files.length; i++) {
        param.append("files", files[i]);
      }
      axios
        .post("/api/api/file/uploads", param)
        .then(() => {
          this.uploadfile();
          this.$message.success("上传成功");
        })
        .catch(() => this.$message.error("系统异常请联系管理员"));
    },
```

下载进度条

```js
     this.progress.visible = true;
        axios({
          method: "get",
          url: `/api/api/file/download?id=${fileid}&password=""`,
          responseType: "blob",
          onDownloadProgress: (progressEvent) => {
            let process =
              ((progressEvent.loaded / progressEvent.total) * 100) | 0;
            this.progress.progress = process;
            let progressText = `下载进度：${process}%`;
            this.progress.progressText = progressText;
          },
        }).then((res) => {
          //下载成功后对进度条处理
          setTimeout(() => {
            this.progress.visible = false;
            this.progress.progress = 0;
            this.progress.progressText = "等待下载中";
          }, 2000);
          this.$message.success("下载成功");
          let blob = new Blob([res.data]);
          const a = document.createElement("a");
          const url = window.URL.createObjectURL(blob);
          a.href = url;
          let tempName = res.headers["content-disposition"]
            .split(";")[1]
            .split("filename=")[1];
          tempName = decodeURI(tempName);
          a.download = tempName; // 设置下载下来的文件名
          a.click();
          window.URL.revokeObjectURL(url);
        });
```

# 项目整理

## 组件化开发

分页组件

## 轮播图

## webpack的项目

## Node项目

## 导航定位

```js
 mounted(){
    let nav = document.querySelector('.nav')
    window.addEventListener('scroll',function(){
      if(window.pageYOffset-80 > 0){
        nav.style.position = 'fixed'
        nav.style.top = '0px'
        nav.style.width = '100%'
      }else{
        nav.style.position = 'static'
        
      }
    })
  }
```

